{"version":3,"file":"static/js/index.3a8eb069.js","sources":["/Users/yangbo/develop/happyBirthday/app/index.js","/Users/yangbo/develop/happyBirthday/static/css/index.scss","webpack:///./static/css/index.scss?fd5e"],"sourcesContent":["import 'static/css/index.scss';\n\nconst PI2 = Math.PI * 2\nlet random = (min, max) => Math.random() * (max - min + 1) + min | 0\n\nclass Birthday {\n  constructor() {\n    this.resize()\n\n    // create a lovely place to store the firework\n    this.fireworks = []\n    this.counter = 0\n  }\n  resize() {\n    this.width = canvas.width = window.innerWidth\n    let center = this.width / 2 | 0\n    this.spawnA = center - center / 4 | 0\n    this.spawnB = center + center / 4 | 0\n\n    this.height = canvas.height = window.innerHeight\n    this.spawnC = this.height * .1\n    this.spawnD = this.height * .5\n  }\n  onClick(evt) {\n     let x = evt.clientX || evt.touches && evt.touches[0].pageX\n     let y = evt.clientY || evt.touches && evt.touches[0].pageY\n\n     let count = random(3,5)\n     for(let i = 0; i < count; i++) {\n         this.fireworks.push(new Firework(\n            random(this.spawnA, this.spawnB),\n            this.height,\n            x,\n            y,\n            random(300, 450),\n            random(30, 110)))\n     }\n\n     this.counter = -30\n  }\n  update() {\n    ctx.globalCompositeOperation = 'hard-light'\n    ctx.fillStyle = 'rgba(20,20,20,0.15)'\n    ctx.fillRect(0, 0, this.width, this.height)\n\n    ctx.globalCompositeOperation = 'lighter'\n    for(let firework of this.fireworks) {\n        firework.update()\n    }\n\n    // if enough time passed... create new new firework\n    if (++this.counter === 15) {\n      this.fireworks.push(new Firework(\n        random(this.spawnA, this.spawnB),\n        this.height,\n        random(0, this.width),\n        random(this.spawnC, this.spawnD),\n        random(300, 450),\n        random(30, 110)))\n      this.counter = 0\n    }\n\n    // remove the dead fireworks\n    if (this.fireworks.length > 1000) {\n        this.fireworks = this.fireworks.filter(firework => !firework.dead)\n    }\n  }\n}\n\nclass Firework {\n  constructor(x, y, targetX, targetY, shade, offsprings) {\n    this.dead = false\n    this.offsprings = offsprings\n\n    this.x = x\n    this.y = y\n    this.targetX = targetX\n    this.targetY = targetY\n\n    this.shade = shade\n    this.history = []\n  }\n  update() {\n    if (this.dead) { return; }\n\n    let xDiff = this.targetX - this.x\n    let yDiff = this.targetY - this.y\n    if (Math.abs(xDiff) > 3 || Math.abs(yDiff) > 3) { // is still moving\n      this.x += xDiff / 20\n      this.y += yDiff / 20\n\n      this.history.push({\n        x: this.x,\n        y: this.y\n      })\n\n      if (this.history.length > 20) {\n        this.history.shift()\n      }\n    } else {\n      if (this.offsprings && !this.madeChilds) {\n        let babies = this.offsprings / 2;\n        for (let i = 0; i < babies; i++) {\n          let targetX = this.x + this.offsprings * Math.cos(PI2 * i / babies) | 0\n          let targetY = this.y + this.offsprings * Math.sin(PI2 * i / babies) | 0\n\n          birthday.fireworks.push(new Firework(this.x, this.y, targetX, targetY, this.shade, 0))\n        }\n      }\n      this.madeChilds = true\n      this.history.shift()\n    }\n\n    if (this.history.length === 0) {\n      this.dead = true\n    }\n    else if (this.offsprings) {\n        for (let i = 0; this.history.length > i; i++) {\n            let point = this.history[i]\n            ctx.beginPath()\n            ctx.fillStyle = 'hsl(' + this.shade + ',100%,' + i + '%)'\n            ctx.arc(point.x, point.y, 1, 0, PI2, false)\n            ctx.fill()\n          }\n    } else {\n      ctx.beginPath()\n      ctx.fillStyle = 'hsl(' + this.shade + ',100%,50%)'\n      ctx.arc(this.x, this.y, 1, 0, PI2, false)\n      ctx.fill()\n    }\n  }\n}\n\nlet canvas = document.getElementById('birthday')\nlet ctx = canvas.getContext('2d')\n\nlet birthday = new Birthday()\nwindow.onresize = () => birthday.resize()\ndocument.onclick = evt => birthday.onClick(evt)\ndocument.ontouchstart = evt => birthday.onClick(evt)\n\n;(function update() {\n    requestAnimationFrame(update)\n    birthday.update()\n})()\n\n\n\n// WEBPACK FOOTER //\n// app/index.js","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  margin: 0;\\n  background: #020202;\\n  cursor: crosshair; }\\n\\ncanvas {\\n  display: block; }\\n\\nh1 {\\n  position: absolute;\\n  top: 20%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n      -ms-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%);\\n  color: #fff;\\n  font-family: \\\"Source Sans Pro\\\";\\n  font-size: 5em;\\n  font-weight: 900;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n   -ms-user-select: none;\\n       user-select: none; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.4@css-loader?{\"importLoaders\":2}!./node_modules/_postcss-loader@2.0.6@postcss-loader/lib?{\"ident\":\"postcss\"}!./node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./static/css/index.scss\n// module id = ./node_modules/_css-loader@0.28.4@css-loader/index.js?{\"importLoaders\":2}!./node_modules/_postcss-loader@2.0.6@postcss-loader/lib/index.js?{\"ident\":\"postcss\"}!./node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./static/css/index.scss\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js??ref--5-1!../../node_modules/_postcss-loader@2.0.6@postcss-loader/lib/index.js??postcss!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./index.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_style-loader@0.18.2@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js??ref--5-1!../../node_modules/_postcss-loader@2.0.6@postcss-loader/lib/index.js??postcss!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./index.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js??ref--5-1!../../node_modules/_postcss-loader@2.0.6@postcss-loader/lib/index.js??postcss!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./index.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/css/index.scss\n// module id = ./static/css/index.scss\n// module chunks = 0"],"mappings":";A;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AACA;AADA;AAMA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAGA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AACA;;;;;;;;;;;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}